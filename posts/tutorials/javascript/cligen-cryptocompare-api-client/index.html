<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Implement a Javascript Client for Crypto Compare API  :: Notes</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Crypto Compare Crypto Compare is a website and API provider which brings you all the latest streaming pricing data in the world of cryptocurrencies. Their API documentation is available here.
Javascript Client I&amp;rsquo;m writing a javascript based client for few commonly used crypto compare APIs which can be used on both nodejs and browser. I&amp;rsquo;m using an NPM module called Cligen to generate the client. The module only needs a corresponding JSON specification of the API endpoints to generate the client." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://abskmj.github.io/notes/posts/tutorials/javascript/cligen-cryptocompare-api-client/" />




<link rel="stylesheet" href="https://abskmj.github.io/notes/assets/style.css">

  <link rel="stylesheet" href="https://abskmj.github.io/notes/assets/green.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://abskmj.github.io/notes/img/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="https://github.com/abskmj.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Implement a Javascript Client for Crypto Compare API  :: Notes">
<meta property="og:description" content="Crypto Compare Crypto Compare is a website and API provider which brings you all the latest streaming pricing data in the world of cryptocurrencies. Their API documentation is available here.
Javascript Client I&amp;rsquo;m writing a javascript based client for few commonly used crypto compare APIs which can be used on both nodejs and browser. I&amp;rsquo;m using an NPM module called Cligen to generate the client. The module only needs a corresponding JSON specification of the API endpoints to generate the client." />
<meta property="og:url" content="https://abskmj.github.io/notes/posts/tutorials/javascript/cligen-cryptocompare-api-client/" />
<meta property="og:site_name" content="Implement a Javascript Client for Crypto Compare API " />

  
    <meta property="og:image" content="https://github.com/abskmj.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2018-12-16 07:30:14 &#43;0000 UTC" />












</head>
<body class="green">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/notes">
  <div class="logo">
    Notes
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="https://github.com/abskmj">Github</a></li>
        
      
        
          <li><a href="https://twitter.com/abskmj">Twitter</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="https://github.com/abskmj">Github</a></li>
      
    
      
        <li><a href="https://twitter.com/abskmj">Twitter</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://abskmj.github.io/notes/posts/tutorials/javascript/cligen-cryptocompare-api-client/">Implement a Javascript Client for Crypto Compare API</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2018-12-16 
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://abskmj.github.io/notes/tags/tutorial/">Tutorial</a>&nbsp;
    
    #<a href="https://abskmj.github.io/notes/tags/cligen/">Cligen</a>&nbsp;
    
    #<a href="https://abskmj.github.io/notes/tags/npm/">NPM</a>&nbsp;
    
    #<a href="https://abskmj.github.io/notes/tags/api/">API</a>&nbsp;
    
    #<a href="https://abskmj.github.io/notes/tags/client/">Client</a>&nbsp;
    
    #<a href="https://abskmj.github.io/notes/tags/javascript/">JavaScript</a>&nbsp;
    
    #<a href="https://abskmj.github.io/notes/tags/browser/">Browser</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="crypto-compare">Crypto Compare<a href="#crypto-compare" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p><a href="https://www.cryptocompare.com/">Crypto Compare</a> is a website and API provider which brings you all the latest streaming pricing data in the world of cryptocurrencies. Their API documentation is available <a href="https://min-api.cryptocompare.com/documentation">here</a>.</p>
<h1 id="javascript-client">Javascript Client<a href="#javascript-client" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>I&rsquo;m writing a javascript based client for few commonly used crypto compare APIs which can be used on both nodejs and browser. I&rsquo;m using an NPM module called <a href="https://github.com/abskmj/cligen">Cligen</a> to generate the client. The module only needs a corresponding JSON specification of the API endpoints to generate the client.</p>
<h1 id="cligen-specification">Cligen Specification<a href="#cligen-specification" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>I&rsquo;m writing the specification for 2 of the commonly used endpoints. You can follow a similar way for other endpoints as well.</p>
<ul>
<li>Single Symbol Price</li>
<li>Historical Minute OHLCV</li>
</ul>
<h2 id="specjson">spec.json<a href="#specjson" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;baseUrl&#34;</span>: <span style="color:#e6db74">&#34;https://min-api.cryptocompare.com/data&#34;</span>,
    <span style="color:#f92672">&#34;operations&#34;</span>: {
        <span style="color:#f92672">&#34;price&#34;</span>: {
            <span style="color:#f92672">&#34;uri&#34;</span>: <span style="color:#e6db74">&#34;/price&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;query&#34;</span>: {
                    <span style="color:#f92672">&#34;parameters&#34;</span>: [
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;tryConversion&#34;</span> },
                        {
                            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;fsym&#34;</span>,
                            <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
                        },
                        {
                            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;tsyms&#34;</span>,
                            <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
                        },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;e&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;extraParams&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;sign&#34;</span> }
                    ]
                }
            }
        },
        <span style="color:#f92672">&#34;histominute&#34;</span>: {
            <span style="color:#f92672">&#34;uri&#34;</span>: <span style="color:#e6db74">&#34;/histominute&#34;</span>,
            <span style="color:#f92672">&#34;data&#34;</span>: {
                <span style="color:#f92672">&#34;query&#34;</span>: {
                    <span style="color:#f92672">&#34;parameters&#34;</span>: [
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;tryConversion&#34;</span> },
                        {
                            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;fsym&#34;</span>,
                            <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
                        },
                        {
                            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;tsym&#34;</span>,
                            <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
                        },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;e&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;aggregate&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;aggregatePredictableTimePeriods&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;limit&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;toTs&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;extraParams&#34;</span> },
                        { <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;sign&#34;</span> }
                    ]
                }
            }
        }

    }
}
</code></pre></div><h1 id="nodejs">NodeJS<a href="#nodejs" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<h2 id="installing-cligen-module">Installing Cligen Module<a href="#installing-cligen-module" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install -save github:@abskmj/cligen
</code></pre></div><h2 id="generating-and-using-the-client">Generating and Using the client<a href="#generating-and-using-the-client" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<pre><code class="language-jvascript" data-lang="jvascript">const cligen = require('@abskmj/cligen');

const spec = require('./spec.json');

const client = cligen.getClient(spec);


// supports callback
client.price({ fsym: 'BTC', tsyms: 'USDT' }, (error, response) =&gt; {
    if (error) {
        console.log(error);
    }
    else {
        console.log(response);
        
        /*
            { headers: 
               { server: 'nginx/1.10.3',
                 date: 'Sun, 16 Dec 2018 08:09:00 GMT',
                 'content-type': 'application/json; charset=UTF-8',
                 'transfer-encoding': 'chunked',
                 connection: 'close',
                 vary: 'Accept-Encoding',
                 'access-control-allow-origin': '*',
                 'access-control-allow-methods': 'GET, POST, OPTIONS',
                 'access-control-allow-headers': 'Content-Type, Cookie, Set-Cookie',
                 'access-control-allow-credentials': 'true',
                 'cache-control': 'public, max-age=10',
                 'cryptocompare-cache-hit': 'false' },
              data: { USDT: 3261.81 },
              status: 200,
              request: 
               { url: 'https://min-api.cryptocompare.com/data/price?fsym=BTC&amp;tsyms=USDT',
                 method: 'GET',
                 headers: {},
                 body: undefined } }
        
        */
    }
});

// supports promise
client.histominute({ fsym: 'BTC', tsym: 'USDT' })
.then((response) =&gt; {
    console.log(response);
    
    /*
        { headers: 
           { server: 'nginx/1.4.6 (Ubuntu)',
             date: 'Sun, 16 Dec 2018 08:41:46 GMT',
             'content-type': 'application/json; charset=UTF-8',
             'transfer-encoding': 'chunked',
             connection: 'close',
             vary: 'Accept-Encoding',
             'access-control-allow-origin': '*',
             'access-control-allow-methods': 'GET, POST, OPTIONS',
             'access-control-allow-headers': 'Content-Type, Cookie, Set-Cookie',
             'access-control-allow-credentials': 'true',
             'cache-control': 'public, max-age=10',
             'cryptocompare-cache-hit': 'false' },
          data: { USDT: 3263.88 },
          status: 200,
          request: 
           { url: 'https://min-api.cryptocompare.com/data/price?fsym=BTC&amp;tsyms=USDT',
             method: 'GET',
             headers: {},
             body: undefined } }
        { headers: 
           { server: 'nginx/1.4.6 (Ubuntu)',
             date: 'Sun, 16 Dec 2018 08:41:46 GMT',
             'content-type': 'application/json; charset=UTF-8',
             'transfer-encoding': 'chunked',
             connection: 'close',
             vary: 'Accept-Encoding',
             'access-control-allow-origin': '*',
             'access-control-allow-methods': 'GET, POST, OPTIONS',
             'access-control-allow-headers': 'Content-Type, Cookie, Set-Cookie',
             'access-control-allow-credentials': 'true',
             'cache-control': 'public, max-age=40',
             'cryptocompare-cache-hit': 'true' },
          data: 
           { Response: 'Success',
             Type: 100,
             Aggregated: false,
             Data: 
              [ ... ],
             TimeTo: 1544949660,
             TimeFrom: 1544863260,
             FirstValueInArray: true,
             ConversionType: { type: 'direct', conversionSymbol: '' },
             RateLimit: {},
             HasWarning: false },
          status: 200,
          request: 
           { url: 'https://min-api.cryptocompare.com/data/histominute?fsym=BTC&amp;tsym=USDT',
             method: 'GET',
             headers: {},
             body: undefined } }
    */
}). catch((error) =&gt; {
    console.log(error);
})

</code></pre>
      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://abskmj.github.io/notes/posts/topics/mongoose/model-relations/">
                <span class="button__icon">←</span>
                <span class="button__text">Model Relations in Mongoose</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://abskmj.github.io/notes/posts/projects/npm/abskmj-query/">
                <span class="button__text">NPM Module - Complex JSON to Query String</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>&copy; 2017 abskmj</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://abskmj.github.io/notes/assets/main.js"></script>
<script src="https://abskmj.github.io/notes/assets/prism.js"></script>





  
</div>

</body>
</html>
