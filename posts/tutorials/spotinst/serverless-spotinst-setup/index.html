<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Deploy functions on Spotinst using Serverless Framework :: Notes</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Spotinst is one of the providers which support deploying serverless functions or FaaS (Function as a Service). Serverless Framework is an NPM module which makes building serverless applications easy and open.
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://abskmj.github.io/notes/posts/tutorials/spotinst/serverless-spotinst-setup/" />





  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/terminal.min.4b367d85d0d0061435650561285afed36c46a7cf8dc6d7ed5642d98e589fa622.css">

  
  <link rel="stylesheet" href="https://abskmj.github.io/notes/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="https://abskmj.github.io/notes/favicon.png">
<link rel="apple-touch-icon" href="https://abskmj.github.io/notes/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Deploy functions on Spotinst using Serverless Framework">
<meta property="og:description" content="Spotinst is one of the providers which support deploying serverless functions or FaaS (Function as a Service). Serverless Framework is an NPM module which makes building serverless applications easy and open.
" />
<meta property="og:url" content="https://abskmj.github.io/notes/posts/tutorials/spotinst/serverless-spotinst-setup/" />
<meta property="og:site_name" content="Notes" />

  <meta property="og:image" content="https://abskmj.github.io/notes/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2019-01-08 09:56:04 &#43;0000 UTC" />









<link rel="apple-touch-icon" sizes="180x180" href="/notes/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/notes/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/notes/favicon-16x16.png">
<link rel="manifest" href="/notes/site.webmanifest">
<meta name="google-site-verification" content="f4QUPyqBnCYP57-SME_dv0q-Di8xwBAOMIhlBGeVWJY" />


<script async src=" https://www.googletagmanager.com/gtag/js?id=G-CMVNGMLVMF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-CMVNGMLVMF');
</script>

<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "aa73cbf1591c45448ff0b2735f97bb74"}'></script>


<script type="text/javascript">
  (function (f, b) { if (!b.__SV) { var e, g, i, h; window.mixpanel = b; b._i = []; b.init = function (e, f, c) { function g(a, d) { var b = d.split("."); 2 == b.length && ((a = a[b[0]]), (d = b[1])); a[d] = function () { a.push([d].concat(Array.prototype.slice.call(arguments, 0))); }; } var a = b; "undefined" !== typeof c ? (a = b[c] = []) : (c = "mixpanel"); a.people = a.people || []; a.toString = function (a) { var d = "mixpanel"; "mixpanel" !== c && (d += "." + c); a || (d += " (stub)"); return d; }; a.people.toString = function () { return a.toString(1) + ".people (stub)"; }; i = "disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split( " "); for (h = 0; h < i.length; h++) g(a, i[h]); var j = "set set_once union unset remove delete".split(" "); a.get_group = function () { function b(c) { d[c] = function () { call2_args = arguments; call2 = [c].concat(Array.prototype.slice.call(call2_args, 0)); a.push([e, call2]); }; } for ( var d = {}, e = ["get_group"].concat( Array.prototype.slice.call(arguments, 0)), c = 0; c < j.length; c++) b(j[c]); return d; }; b._i.push([e, f, c]); }; b.__SV = 1.2; e = f.createElement("script"); e.type = "text/javascript"; e.async = !0; e.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === f.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"; g = f.getElementsByTagName("script")[0]; g.parentNode.insertBefore(e, g); } })(document, window.mixpanel || []);
</script>
<script>
  mixpanel.init('c1ab286a8aa13f0ca206a6cd385de598', {track_pageview: true, persistence: 'localStorage'});
</script>

</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/notes">
  <div class="logo">
    Notes
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="https://discordapp.com/users/220585271983472650">Discord</a></li>
        
      
        
          <li><a href="mailto:contact.abskmj@gmail.com">Email</a></li>
        
      
        
          <li><a href="https://github.com/abskmj">Github</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="https://discordapp.com/users/220585271983472650" >Discord</a></li>
        
      
        
          <li><a href="mailto:contact.abskmj@gmail.com" >Email</a></li>
        
      
        
          <li><a href="https://github.com/abskmj" >Github</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://abskmj.github.io/notes/posts/tutorials/spotinst/serverless-spotinst-setup/">Deploy functions on Spotinst using Serverless Framework</a>
  </h1>
  <div class="post-meta"><time class="post-date">2019-01-08</time></div>

  
    <span class="post-tags">
      
      #<a href="https://abskmj.github.io/notes/tags/spotinst/">Spotinst</a>&nbsp;
      
      #<a href="https://abskmj.github.io/notes/tags/nodejs/">NodeJS</a>&nbsp;
      
      #<a href="https://abskmj.github.io/notes/tags/npm/">NPM</a>&nbsp;
      
      #<a href="https://abskmj.github.io/notes/tags/tutorial/">Tutorial</a>&nbsp;
      
      #<a href="https://abskmj.github.io/notes/tags/serverless/">Serverless</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p><a href="https://spotinst.com/products/spotinst-functions/">Spotinst</a> is one of the providers which support deploying serverless functions or FaaS (Function as a Service). <a href="https://serverless.com/">Serverless Framework</a> is an NPM module which makes building serverless applications easy and open.</p>
<h1 id="isolated-workspace">Isolated Workspace<a href="#isolated-workspace" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>The steps listed below is different from the traditional steps listed on the official site. I always like to keep all the NPM modules and related files within the project directory to keep things isolated from other projects. This also allows me to use multiple Spotinst credentials for multiple serverless applications.</p>
<h1 id="serverless-framework">Serverless Framework<a href="#serverless-framework" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<h2 id="installation">Installation<a href="#installation" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Install the framework globally</p>
<pre tabindex="0"><code>npm install -g serverless
</code></pre><p>Install the Spotinst functions plugin locally.</p>
<pre tabindex="0"><code>npm install --save-dev serverless-spotinst-functions
</code></pre><h2 id="configuration">Configuration<a href="#configuration" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Create a <code>serverless.yml</code> file in the root directory of the project.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Welcome to Serverless!</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This file is the main config file for your service.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It&#39;s very minimal at this point and uses default values.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You can always add more config options for more control.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We&#39;ve included some commented out config examples here.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Just uncomment any of them to get that config option.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For full config options, check the docs:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    docs.serverless.com</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Happy Coding!</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">service: demo # NOTE</span>: <span style="color:#ae81ff">update this with your service name</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">provider</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">spotinst</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#stage: &lt;Stage Name&gt;  #Optional. Defaults to &#39;dev&#39;, see https://help.spotinst.com/hc/en-us/articles/115005893409</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">spotinst</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>: <span style="color:#ae81ff">env-c0XXbXeb</span> <span style="color:#75715e">#&lt;env-XXXX&gt; Required.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># exclude serverless files that are needed to be deployed</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">exclude</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">.aws/**</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">.config/**</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">.serverlessrc</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">.spotinst/**       </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">functions</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hello</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runtime</span>: <span style="color:#ae81ff">nodejs8.3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">handler</span>: <span style="color:#ae81ff">handler.main</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">memory</span>: <span style="color:#ae81ff">128</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">timeout</span>: <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">access</span>: <span style="color:#ae81ff">private</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    iamRoleConfig:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      roleId: # role-id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    activeVersions:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        - &#34;version&#34;: &#34;$LATEST&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#          &#34;percentage&#34;: 100.0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    cors:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        enabled: # false by default</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        origin:  # &#39;*&#39; by default</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        headers: # &#39;Content-Type,Authorization&#39; by default</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        methods: # &#39;DELETE,GET,HEAD,OPTIONS,PATCH,POST,PUT&#39; by default</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    cron:  # Setup scheduled trigger with cron expression</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      active: true</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      value: &#39;* * * * *&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    environmentVariables:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      key: Value</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># extend the framework using plugins listed here:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://github.com/serverless/plugins</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">plugins</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ae81ff">serverless-spotinst-functions</span>
</span></span></code></pre></div><h2 id="credentials">Credentials<a href="#credentials" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Save the spotinst credentials for serverless framework.</p>
<pre tabindex="0"><code>HOME=./ serverless config credentials --provider spotinst --token {{your token}}  --account {{your account id}}
</code></pre><ul>
<li><code>HOME=./</code> sets the home directory as current project directory so that the Spotinst credentials are stored within the project directory instead of <code>~/.spotinst/credentials</code>.</li>
<li>Spotinst Account ID can be found at <a href="https://console.spotinst.com/#/settings/account/general">https://console.spotinst.com/#/settings/account/general</a></li>
<li>Spotinst Token can be found at <a href="https://console.spotinst.com/#/settings/tokens/permanent">https://console.spotinst.com/#/settings/tokens/permanent</a></li>
</ul>
<h2 id="deployment">Deployment<a href="#deployment" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Add a <code>deploy</code> script to <code>package.json</code> file.</p>
<pre tabindex="0"><code>{
  ...
  &#34;scripts&#34;: {
    ...
    &#34;deploy&#34;: &#34;HOME=./ serverless deploy&#34;
  },
  ...
}
</code></pre><p>Run the script to deploy.</p>
<pre tabindex="0"><code>npm run deploy
</code></pre><h2 id="version-control">Version Control<a href="#version-control" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Some of the serverless directories or files should not be tracked as part of the version control. These can be added to a <code>.gitignore</code> file.</p>
<pre tabindex="0"><code># package directories
node_modules

# serverless directories
.aws
.config
.serverless
.serverlessrc
.spotinst
</code></pre>
      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h"></span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://abskmj.github.io/notes/posts/topics/mongoose/mongoose-lean-hydrate/" class="button inline prev">
        Lean option and Hydrate method in Mongoose
      </a>
    
    
      ::
    
    
      <a href="https://abskmj.github.io/notes/posts/solutions/hackerrank/contests/projecteuler/euler008/" class="button inline next">
        HackerRank Contest - Project Euler - Largest product in a series
      </a>
    
  </div>
</div>


  

  
    <div id="sponsor" class="pagination" style="display: none;">
  <div class="pagination__title">
    <span class="pagination__title-h">Sponsor</span>
    <hr>
  </div>
  <div class="pagination__buttons">
    <a id="sponsor-link" href="https://wise.prf.hn/l/rwNWqOE" target="_blank">
      <span id="sponsor-text" style="white-space: normal;">
        Wise is a cheaper, faster way to send money abroad. Join over 10 million people who get the real exchange rate
        with Wise. They’re up to 8x cheaper than banks.
      </span>
    </a>
  </div>
</div>

<script src="//ace-ally.onrender.com/next.js"></script>

<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Discuss Post</span>
    <hr>
  </div>
  <div class="pagination__buttons">
    <span class="button next">
      <a href="https://github.com/abskmj/notes/discussions/new?category=general&label=comment&title=Deploy%20functions%20on%20Spotinst%20using%20Serverless%20Framework">
        <span class="button__text">Comment</span>
        <span class="button__icon">→</span>
      </a>
    </span>
    <span class="button next">
      <a href="https://github.com/abskmj/notes/tree/master/content/posts/tutorials/spotinst/serverless-spotinst-setup.md">
        <span class="button__text">Edit at Github</span>
        <span class="button__icon">→</span>
      </a>
    </span>
  </div>
</div>
  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>&copy; abskmj</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/notes/bundle.min.js"></script>





  
</div>

</body>
</html>
