<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ubuntu on Notes</title><link>https://abskmj.github.io/notes/tags/ubuntu/</link><description>Recent content in Ubuntu on Notes</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>&amp;copy; abskmj</copyright><lastBuildDate>Mon, 17 Jul 2023 00:00:00 +0530</lastBuildDate><atom:link href="https://abskmj.github.io/notes/tags/ubuntu/index.xml" rel="self" type="application/rss+xml"/><item><title>PopOS on ASUS ROG Zephyrus G14 Laptop</title><link>https://abskmj.github.io/notes/posts/rog-zephyrus-g14/popos/</link><pubDate>Mon, 17 Jul 2023 00:00:00 +0530</pubDate><guid>https://abskmj.github.io/notes/posts/rog-zephyrus-g14/popos/</guid><description>Install the latest version of PopOS alongside Windows 10 in a multi-boot setup.</description><content>&lt;p>Install the latest version of PopOS alongside Windows 10 in a multi-boot setup. Follow similar steps to install Ubuntu as well.&lt;/p>
&lt;h1 id="update---popos-2110-and-newer">Update - PopOS 21.10 and newer&lt;/h1>
&lt;p>I recommend using the latest version as most of the features will work out of the box without needing to install adding packages as documented.&lt;/p>
&lt;p>Still doesn&amp;rsquo;t work:&lt;/p>
&lt;ul>
&lt;li>Fingerprint login&lt;/li>
&lt;li>Microphone mute &amp;amp; ROG button on the top of the keyboard&lt;/li>
&lt;li>Function keys to control fan speed&lt;/li>
&lt;/ul>
&lt;h1 id="demo-mode-on-live-usb">Demo Mode on Live USB&lt;/h1>
&lt;blockquote>
&lt;p>Fast startup option in Windows 10 and the secure boot option in BIOS need to be disabled&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Download the latest version of PopOS with NVIDIA drivers ISO from &lt;a href="https://pop.system76.com/">the official site&lt;/a>&lt;/li>
&lt;li>Create a live USB following &lt;a href="https://support.system76.com/articles/live-disk/">the guide&lt;/a>&lt;/li>
&lt;li>Restart the laptop and press or hold the &lt;code>ESC&lt;/code> key when on the screen with the &lt;code>Republic of Gamers&lt;/code> logo&lt;/li>
&lt;li>Select the second EFI partition to boot into PopOS from USB&lt;/li>
&lt;li>Follow &lt;a href="https://support.system76.com/articles/install-pop/">the guide&lt;/a> to try the Demo Mode&lt;/li>
&lt;/ul>
&lt;h1 id="install-on-ssd">Install on SSD&lt;/h1>
&lt;p>The steps below are to install PopOS and keep the Windows 10 system intact&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Click &lt;code>Custom (Advanced)&lt;/code> to make a new partition on SSD for PopOS&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Click on &lt;code>Modify Partitions&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Right-click on the primary SSD partition of around 450+ GB and select resize.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Enter the sum of sizes for the new partitions and click on the &lt;code>Resize/Move&lt;/code> button to create a new unallocated partition&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name / Label&lt;/th>
&lt;th>Size&lt;/th>
&lt;th>File System&lt;/th>
&lt;th>Use as&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>EFI&lt;/td>
&lt;td>500 MiB&lt;/td>
&lt;td>fat32&lt;/td>
&lt;td>Boot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PopOS&lt;/td>
&lt;td>Min. 20 GiB&lt;/td>
&lt;td>ext4&lt;/td>
&lt;td>Root (/)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Swap&lt;/td>
&lt;td>Optional&lt;/td>
&lt;td>linux-swap&lt;/td>
&lt;td>Swap&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;li>
&lt;p>Right-click on the unallocated partition and create new partitions as the above table&lt;/p>
&lt;/li>
&lt;li>
&lt;p>After partitions are modified, click on the green tick to create them on SSD&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Find the new partitions and toggle the &lt;code>Use Partition&lt;/code> option and choose &lt;code>Use as&lt;/code> according to the above table&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Click on &lt;code>Erase and Install&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Click on &lt;code>Restart&lt;/code> when the installation is complete&lt;/p>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>After installation, the laptop will load PopOS by default. To use Windows 10, press or hold the &lt;code>ESC&lt;/code> key when on the screen with &lt;code>Republic of Gamers&lt;/code> logo and select &lt;code>Windows Boot Manager&lt;/code> each time.&lt;/p>
&lt;/blockquote>
&lt;h1 id="setup-after-installation">Setup after installation&lt;/h1>
&lt;h2 id="monitor-over-usb-c">Monitor over USB-C&lt;/h2>
&lt;p>Make sure &lt;code>NVIDIA Graphics&lt;/code> is enabled for this feature to work. Please click on the battery icon on the taskbar, and again on the battery menu.&lt;/p>
&lt;h2 id="system-time-in-windows--popos">System Time in Windows &amp;amp; PopOS&lt;/h2>
&lt;p>Update the below &lt;code>timedatectl&lt;/code> configuration in PopOS. Details are available at &lt;a href="https://support.system76.com/articles/dual-booting/">support.system76.com&lt;/a>&lt;/p>
&lt;pre tabindex="0">&lt;code>timedatectl set-local-rtc 1 --adjust-system-clock
&lt;/code>&lt;/pre>&lt;p>Verify the change by executing the below command. You should see the &lt;code>RTC in local TZ&lt;/code> configuration as &lt;code>yes&lt;/code>.&lt;/p>
&lt;pre tabindex="0">&lt;code>timedatectl
&lt;/code>&lt;/pre>&lt;h2 id="asus-packages-only-on-popos-2010-and-older">ASUS Packages (Only on PopOS 20.10 and older)&lt;/h2>
&lt;p>Install the below packages to use the function key combinations, Animatrix display, fan speed, and graphic modes. A complete list of features is available at &lt;a href="https://gitlab.com/asus-linux/asus-nb-ctrl#implemented">gitlab.com&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gitlab.com/asus-linux/hid-asus-rog">hid-asus-rog&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gitlab.com/asus-linux/asus-rog-nb-wmihttps://gitlab.com/asus-linux/asus-rog-nb-wmi">asus-rog-nb-wmi&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gitlab.com/asus-linux/asus-nb-ctrl">asus-nb-ctrl&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Add these packages using the package manager&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;deb https://download.opensuse.org/repositories/home:/luke_nukem:/asus/xUbuntu_20.04/ /&amp;#34;&lt;/span> | sudo tee /etc/apt/sources.list.d/asus.list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget -q -O - https://download.opensuse.org/repositories/home:/luke_nukem:/asus/xUbuntu_20.04/Release.key | sudo apt-key add -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-get install dkms-hid-asus-rog dkms-asus-rog-nb-wmi asus-nb-ctrl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="volume-control-only-on-popos-2010-and-older">Volume Control (Only on PopOS 20.10 and older)&lt;/h2>
&lt;p>Add below lines to the file at location &lt;code>/usr/share/pulseaudio/alsa-mixer/paths/analog-output.conf.common&lt;/code>, just before the &lt;code>[Element PCM]&lt;/code> section. It will also make the &lt;code>mute the microphone&lt;/code> button usable.&lt;/p>
&lt;pre tabindex="0">&lt;code>[Element Master]
switch = mute
volume = ignore
&lt;/code>&lt;/pre>&lt;p>&lt;img src="pulseaudio-config.png" alt="Pulse Audio Configuration">&lt;/p>
&lt;h2 id="text-on-screen-too-small-only-on-popos-2010-and-older">Text on screen too small (Only on PopOS 20.10 and older)&lt;/h2>
&lt;p>Out of the box, the text on the screen is too small to read. Enable &lt;code>Fractional Scaling&lt;/code> in &lt;code>Settings &amp;gt; Displays&lt;/code> to 125% or 150% for comfortable reading.&lt;/p>
&lt;p>&lt;img src="displays-fractional-scaling.png" alt="Display Fractional Scaling">&lt;/p>
&lt;h1 id="test-laptop">Test Laptop&lt;/h1>
&lt;p>&lt;a href="https://amzn.to/35NWlNN">ASUS ROG Zephyrus G14 GA401IH-HE012T&lt;/a>&lt;/p>
&lt;ul>
&lt;li>AMD Ryzen 5 4600HS&lt;/li>
&lt;li>NVIDIA GeForce GTX 1650 4GB GDDR6 VRAM&lt;/li>
&lt;li>8GB DDR4 3200MHz SDRAM&lt;/li>
&lt;li>512GB M.2 NVMe PCIe 3.0 SSD&lt;/li>
&lt;li>Without Anime Matrix&lt;/li>
&lt;/ul>
&lt;h1 id="references">References&lt;/h1>
&lt;ul>
&lt;li>ASUS G14 Ubuntu 20.04 Setup at &lt;a href="https://www.reddit.com/r/ZephyrusG14/comments/id4e2d/asus_g14_ubuntu_2004_setup/">reddit.com&lt;/a>&lt;/li>
&lt;li>DKMS installable module for ASUS ROG laptops at &lt;a href="https://gitlab.com/asus-linux/hid-asus-rog">gitlab.com&lt;/a>&lt;/li>
&lt;li>Installing Linux (Pop_OS!) on Asus Zephyrus G14 at &lt;a href="https://heinbio.me/blog/5f23042bee73aa31486bff7c">heinbio.me&lt;/a>&lt;/li>
&lt;/ul></content></item><item><title>Enable Hibernate on Pop OS</title><link>https://abskmj.github.io/notes/posts/pop-os/enable-hibernate/</link><pubDate>Sun, 26 Jul 2020 20:17:30 +0530</pubDate><guid>https://abskmj.github.io/notes/posts/pop-os/enable-hibernate/</guid><description/><content>&lt;h1 id="prerequisites">Prerequisites&lt;/h1>
&lt;h2 id="check-if-the-kernel-supports-hibernation">Check if the kernel supports Hibernation&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cat /sys/power/state
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It should list &lt;code>disk&lt;/code> as an option on the list&lt;/p>
&lt;h2 id="check-if-a-swap-file-or-partition-is-available">Check if a Swap file or partition is available&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>free -h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If &lt;code>Swap&lt;/code> is listed as 0, it means a swap is not available and needs to be created.&lt;/p>
&lt;h1 id="create-a-swap-file">Create a Swap file&lt;/h1>
&lt;ul>
&lt;li>Create a swap file.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo fallocate -l 6G /swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>6G&lt;/code> can be updated with a recommended swap size for the machine which is listed under &lt;code>How much swap do I need?&lt;/code> section at &lt;a href="https://help.ubuntu.com/community/SwapFaq">help.ubuntu.com&lt;/a>&lt;/p>
&lt;ul>
&lt;li>Permissions&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo chmod &lt;span style="color:#ae81ff">600&lt;/span> /swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Format as swap&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo mkswap /swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Activate the swap&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo swapon /swapfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#39;/swapfile none swap defaults 0 0&amp;#39;&lt;/span> | sudo tee -a /etc/fstab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="configure-hibernation">Configure Hibernation&lt;/h1>
&lt;p>List the swap&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cat /proc/swaps
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Swap file is generally listed as &lt;code>/swapfile&lt;/code>&lt;/li>
&lt;li>Swap partition is listed as &lt;code>/dev/sdxx&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="swap-uuid">Swap UUID&lt;/h2>
&lt;p>Get the UUID for the swap&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>findmnt -no UUID -T /swapfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It looks something like below&lt;/p>
&lt;pre tabindex="0">&lt;code>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
&lt;/code>&lt;/pre>&lt;h2 id="swap-offset">Swap offset&lt;/h2>
&lt;p>This is only needed when a swap file is available. Get the offset&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo filefrag -v /swapfile | awk &lt;span style="color:#e6db74">&amp;#39;{ if($1==&amp;#34;0:&amp;#34;){print $4} }&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It looks something like below&lt;/p>
&lt;pre tabindex="0">&lt;code>9999999..
&lt;/code>&lt;/pre>&lt;h2 id="update-kernel-options">Update Kernel Options&lt;/h2>
&lt;p>For a Swap File&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo kernelstub -a &lt;span style="color:#e6db74">&amp;#34;resume=UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo kernelstub -a &lt;span style="color:#e6db74">&amp;#34;resume_offset=9999999&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For a Swap Partition, &lt;code>resume_offset&lt;/code> option is not needed&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo kernelstub -a &lt;span style="color:#e6db74">&amp;#34;resume=UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add below line to &lt;code>/etc/initramfs-tools/conf.d/resume&lt;/code>. Create the file if not present&lt;/p>
&lt;p>For a Swap File&lt;/p>
&lt;pre tabindex="0">&lt;code>resume=UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx resume_offset=9999999
&lt;/code>&lt;/pre>&lt;p>For a Swap Partition&lt;/p>
&lt;pre tabindex="0">&lt;code>resume=UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
&lt;/code>&lt;/pre>&lt;p>Update the configurations&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo update-initramfs -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="test-hibernation">Test Hibernation&lt;/h1>
&lt;p>Remember to save your work before trying this out&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo systemctl hibernate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="references">References&lt;/h1>
&lt;ul>
&lt;li>SwapFaq at &lt;a href="https://help.ubuntu.com/community/SwapFaq">help.ubuntu.com&lt;/a>&lt;/li>
&lt;li>Guide to hibernate? &lt;a href="https://pop-planet.info/forums/threads/guide-to-hibernate-answer-is-a-guide.426/">pop-planet.info&lt;/a>&lt;/li>
&lt;/ul></content></item></channel></rss>